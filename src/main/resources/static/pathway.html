<!DOCTYPE html>
<html lang="en" ng-app="plnApplication">
<meta charset="UTF-8">
<title>Pathway Analyzer</title>

<head>

    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">

    <!-- Custom  CSS -->
    <link rel="stylesheet" href="css/custom.css">

    <!-- Favicon -->
    <link rel="shortcut icon"
          href="http://www.lincs-dcic.org/images/dcic-logo/favicon.png?v=2"/>
</head>

<body>
<div ng-controller="MainCtrl as ctrl" ng-init="retrieveGenes()">
    <nav class="navbar navbar-default navbar-static-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                        aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" style="color:#337AB7;" href="#/">PLN Converter</a>
            </div>

            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                </ul>
                <ul class="nav navbar-nav col-sm-5">

                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="https://github.com/behrouzsh/PLNconverter-v2" target="_blank">GitHub</a></li>
                </ul>

            </div>
        </div>

    </nav>

    <div class="container" >
        <h3> About</h3>
        <hr/>
        <div class="bs-callout bs-callout-primary">
            <p>This pathway analysis is an extension of Protein Line Notation (PLN) project which is a notation that encodes “protein forms” as a linear string of
                characters. Paste in a list of gene symbols optionally followed by a comma.</p>
        </div>

    </div>

    <div class="container" style="padding-top: 20px;">

        <div class="well col-sm-12" combineHorizontalScrolls="horizontal-scroll">
            <div class="horizontal-scroll form-group col-sm-4" style="padding-left: 0px;">
                <!--<a style="text-decoration: none;">-->
                <!--<a class= "collapse in" class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne" style="text-decoration: none; ">-->

                <span style="color:steelblue;" class="glyphicon glyphicon-cog"></span> &nbsp;Enter Gene Signature

                <br/><br/>

                <div class="horizontal-scroll" style="padding-top:8px; padding-bottom:10px;" >
                    <div  >

                        <textarea class="form-control" rows="5" ng-model="ctrl.genes"></textarea>
                        <!--console.log()-->
                    </div>

                </div>


                Delimiter: &nbsp;
                <label class="checkbox-inline">
                    <input type="checkbox" id="inlineCheckbox1" value="option2" checked="true" disabled="true"> comma
                </label>
                <label class="checkbox-inline">
                    <input type="checkbox" id="inlineCheckbox2" value="option1" checked="true" disabled="true">
                    semi-colon
                </label>
                <label class="checkbox-inline">
                    <input type="checkbox" id="inlineCheckbox3" value="option3" checked="true" disabled="true"> new line
                </label>
                <!--<a class="nav navbar-nav" style="padding-bottom: 12px;" href="/pln/modification.html" target="_blank">Input Format Description</a>-->
                <div style="float:left;">
            <span >
                <hr/>
                <p>
                &nbsp;<span style='color:blue'>{{ctrl.numberOfAllValidGenes}}</span> out of {{ctrl.numberOfAllInputGenes}} input genes are valid.
                </p>
                <span ng-if="ctrl.flagFoundNPCG" >
                    &nbsp;Non Protein Coding Genes are: <span style='color:blue'>{{ctrl.nonValidGenes}}</span>. Try other names of these genes!
                </span>

            </span>
                </div>
            </div>

            <div class="horizontal-scroll form-group col-sm-2 col-sm-offset-1" >
                <label style="padding-bottom: 24px;">Input Genes&nbsp;
                    <!--<span style="color:steelblue;" class="glyphicon glyphicon-question-sign"-->
                          <!--data-delay='{"show":"0", "hide":"100"}'-->
                          <!--data-toggle="tooltip"-->
                          <!--title="Parsed motifs are used to query ProSite API. They are obtained from entered peptides by parsing them with JavaScript regular expression: /[^A-Z]/g">-->

                    <!--</span>-->


                    <br/>
                </label>
                <div class = " list-responsive-vertical2" style = "word-wrap:break-word;" >
                    <div ng-repeat="gene in ctrl.parsedGenes track by $index">{{gene}}<br/></div>
                </div>
            </div>

            <div class="horizontal-scroll form-group col-sm-5 col-sm-offset-0" >
            <label style="padding-bottom: 24px;">Gene Names&nbsp;
            <!--<span style="color:steelblue;" class="glyphicon glyphicon-question-sign"-->
            <!--data-delay='{"show":"0", "hide":"100"}'-->
            <!--data-toggle="tooltip"-->
            <!--title="Parsed modifications are used to query PSIsty-MOD ontology. They are obtained from entered peptides by parsing them with JavaScript regular expression: /[A-Z]\[\+[\d\.]+]/g">-->

            <!--</span>-->
                <br/>
            </label>
            <div class = "list-responsive-vertical3" style="word-wrap:break-word;" >
            <div ng-repeat="item in ctrl.inputGeneInfo track by $index">{{item.name}}<br/></div>
            </div>

            </div>


            <button style="float:right" class="btn btn-primary col-sm-offset-10" ng-click="ctrl.onSubmitPathway('table')">
                Submit &nbsp;
                <span ng-show="ctrl.pathwayWaiting" >
                        <span class="glyphicon glyphicon-refresh glyphicon-spin"></span>
                </span>
            </button>


        </div>
        <div class="container" ng-show="ctrl.showOutputPathway ">
            <h3>Input Gene Info</h3>
            <hr/>

            <div class="well" ng-show="true">

                <table class="table table-striped table-bordered">
                    <thead>
                    <tr>
                        <th>Gene Symbol</th>
                        <th>Gene Name</th>
                        <th>HGNC ID</th>
                        <th>Gene Family</th>
                        <th>Previous Symbols</th>
                        <th>Uniprot IDs</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="gene in ctrl.inputGeneInfo" ng-if="gene.symbol != ''">
                        <td>{{gene.symbol}}</td>
                        <!--New version of http://www.ebi.ac.uk/ols/ontologies/mod/terms?obo_id={{mapping.identifier}}-->
                        <!--Old version of http://www.ebi.ac.uk/ontology-lookup/?termId={{mapping.identifier}}-->
                        <td>{{gene.name}}</td>
                        <td>{{gene.hgnc_id}}</td>
                        <td>
                        <span ng-repeat="family in gene.gene_family track by $index">
                            <a>{{family}}</a><br/>
                        </span>
                        </td>
                        <td>
                            <span ng-repeat="symbol in gene.prev_symbol track by $index">
                            <a>{{symbol}}</a><br/>
                        </span>
                        <td>
                            <span ng-repeat="uniprot in gene.uniprot_ids track by $index">
                            <a>{{uniprot}}</a><br/>
                        </span>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <br/>

            <h3>Pathway View</h3>
            <hr/>

            <select
                    ng-model="selectedPathways"
                    ng-change="changedValue(selectedPathways)"
                    ng-options = "x.value for x in pathways">
            </select>
            <hr/>
            <button>
                <a id="download" href="#">Download SVG
                </a>
            </button>
            <br/>
            <div id="chart"></div>

            <h3>Kinase Network View</h3>
            <hr/>
            <button>
                <a id="download2" href="#">Download SVG
                </a>
            </button>
            <br/>
            <div id="chart2"></div>


        </div>




        <!--<div class="accordion well" id="accordion2">-->
            <!--<div class="accordion-group">-->
                <!--<div class="accordion-heading">-->
                    <!--<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo"-->
                       <!--style="text-decoration: none;">-->
                        <!--<span style="color:steelblue;" class="glyphicon glyphicon-cog"></span> &nbsp;Output Format Setting-->
                    <!--</a>-->



                <!--</div>-->
                <!--<div id="collapseTwo" class="accordion-body collapse">-->
                    <!--<div class="accordion-inner">-->
                        <!--<span style="float:left">-->
                            <!--<a href="javascript:void(0);" ng-click="ctrl.formatAsInchOrAllhits=false"-->
                               <!--style="text-decoration:none;"-->
                               <!--ng-style="!ctrl.formatAsInchOrAllhits && {'font-weight': 'bold'}">InChl-Like</a>-->
                            <!--/-->
                            <!--<a href="javascript:void(0);" ng-click="ctrl.formatAsInchOrAllhits=true"-->
                               <!--style="text-decoration:none;"-->
                               <!--ng-style="ctrl.formatAsInchOrAllhits && {'font-weight': 'bold'}">All-Hits</a>-->
                        <!--</span>-->

                    <!--</div>-->
                <!--</div>-->

            <!--</div>-->

        <!--</div>-->
        <!--<div></div>-->
    </div>

    <!--<div class="container">-->
        <!--<div style="float:right;">-->
            <!--<span ng-show="ctrl.waiting ">-->
                <!--<p>&nbsp;Prosite REST API responds usually within a couple of seconds for each query.</p>-->
            <!--</span>-->
            <!--<span ng-show="ctrl.waiting && ctrl.showOutput">-->
                <!--<p>-->
                <!--&nbsp;Found <span style='color:blue'>{{ctrl.prositeFoundNum}}</span> out of {{ctrl.motifLength}} motifs, Prosite server responded for <span style='color:blue'>{{ctrl.prositeFound}}</span>.-->
                <!--</p>-->
            <!--</span>-->
            <!--<span ng-show="ctrl.waiting && ctrl.showOutput">-->
                <!--<p>-->
                <!--&nbsp;Found <span style='color:blue'>{{ctrl.uniprotFoundNum}}</span> out of {{ctrl.uniprotLength}} proteins from the Uniprot server.-->
                <!--</p>-->
            <!--</span>-->

        <!--</div>-->
    <!--</div>-->

    <!--<div class="container" ng-show="ctrl.showOutput && !ctrl.waiting">-->
        <!--<div style="float:left;">-->

            <!--<span >-->
                <!--<p>-->
                <!--&nbsp;Found <span style='color:blue'>{{ctrl.prositeFoundNum}}</span> out of {{ctrl.motifLength}} motifs.-->
                <!--</p>-->

                <!--<p>-->
                <!--&nbsp;Found <span style='color:blue'>{{ctrl.uniprotFoundNum}}</span> out of {{ctrl.uniprotLength}} proteins from the Uniprot server.-->
                <!--</p>-->
            <!--</span>-->

        <!--</div>-->
    <!--</div>-->



    <!--<div class="container" ng-show="!ctrl.showOutput && ctrl.noResponse &&!ctrl.waiting ">-->
        <!--<br/><br/><br/>-->
        <!--<strong>Prosite server is busy, please try reconnecting again later. </strong><br/>-->
    <!--</div>-->

    <div class="container" style="padding-top: 20px;">
        <h3> References</h3>
        <hr/>

        <div class="bs-callout bs-callout-default">
            <p>Kuleshov MV, Jones MR, Rouillard AD, Fernandez NF, Duan Q, Wang Z, Koplev S, Jenkins SL, Jagodnik KM, Lachmann A, McDermott MG, Monteiro CD, Gundersen GW, Ma'ayan A.
                Enrichr: a comprehensive gene set enrichment analysis web server 2016 update. Nucleic Acids Research. 2016; gkw377.
                </p>
        </div>
    </div>

    <!--<div class="container" style="padding-top: 20px;">-->
        <!--<h3> References</h3>-->
        <!--<hr/>-->

        <!--<div class="bs-callout bs-callout-default">-->
            <!--<p>.</p>-->
            <!--<p>.</p>-->
        <!--</div>-->
    <!--</div>-->


<!--{{ctrl.responseRaw}}-->
<!--{{ctrl.uniprotResponseRaw[0]}}-->
<footer class="footer">

    <div class="container">
        <p class="text-muted" style="padding-top:5px; text-align: right;">Developed within NIH funded <a
                href="http://lincsproject.org" target="_blank">LINCS Project</a></p>
    </div>

    <!-- jQuery required by Bootstrap -->
    <script src="bower_components/jquery/dist/jquery.min.js"></script>

    <script>
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>

    <!-- AngularJS -->
    <script src="bower_components/angular/angular.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- dirPagination JS -->
    <script src="bower_components/bootstrap/dist/js/dirPagination.js"></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-filter/0.5.8/angular-filter.min.js"></script>

    <!--d3js-->
    <!--<script src="https://d3js.org/d3-selection.v1.min.js"></script>-->
    <script src="http://d3js.org/d3.v3.js"></script>
    <script src="bower_components/d3/d3.legend.js"></script>

    <!--<script src="https://d3js.org/d3.v3.min.js"></script>-->

    <!-- PLN Angular -->
    <script src="js/app.js"></script>
    <script src="js/controllers.js"></script>

</footer>
</body>

</html>
